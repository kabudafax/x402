# å®æ–½æ€»ç»“

æœ¬æ–‡æ¡£æ€»ç»“äº†åœ¨ Monad æµ‹è¯•ç½‘éƒ¨ç½² x402 AI Agent Trading Platform çš„å®Œæ•´å®æ–½æƒ…å†µã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ç¯å¢ƒå˜é‡é…ç½®

- âœ… åˆ›å»ºäº† `contracts/.env.example` - åˆçº¦éƒ¨ç½²é…ç½®æ¨¡æ¿
- âœ… åˆ›å»ºäº† `backend/.env.example` - åç«¯æœåŠ¡é…ç½®æ¨¡æ¿
- âœ… åˆ›å»ºäº† `frontend/.env.example` - å‰ç«¯åº”ç”¨é…ç½®æ¨¡æ¿

æ‰€æœ‰ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶éƒ½å·²åˆ›å»ºï¼ŒåŒ…å«å¿…è¦çš„é…ç½®é¡¹è¯´æ˜ã€‚

### 2. æ™ºèƒ½åˆçº¦éƒ¨ç½²è„šæœ¬å®Œå–„

- âœ… ä¿®æ”¹äº† `contracts/scripts/Deploy.s.sol`
  - ä½¿ `MOCK_USDC_ADDRESS` å¯é€‰ï¼ˆå¦‚æœæœªæä¾›ï¼Œè·³è¿‡ç¤ºä¾‹æœåŠ¡éƒ¨ç½²ï¼‰
  - æ·»åŠ äº†æœåŠ¡è‡ªåŠ¨ä¸Šæ¶åˆ°å¸‚åœºçš„é€»è¾‘
  - æ”¹è¿›äº†éƒ¨ç½²æ—¥å¿—è¾“å‡º

### 3. å‰ç«¯åŠŸèƒ½å®Œå–„

#### 3.1 åˆçº¦ ABI æ–‡ä»¶
- âœ… ä»ç¼–è¯‘è¾“å‡ºæå–äº†æ‰€æœ‰å¿…è¦çš„ ABI æ–‡ä»¶ï¼š
  - `Agent.json` - Agent åˆçº¦ ABI
  - `Service.json` - Service åˆçº¦ ABI
  - `Market.json` - Market åˆçº¦ ABI
  - `X402PaymentHandler.json` - x402 æ”¯ä»˜å¤„ç†å™¨ ABI
  - `AgentFull.json` - Agent åˆçº¦å®Œæ•´ä¿¡æ¯ï¼ˆåŒ…å« bytecodeï¼‰

#### 3.2 Agent åˆçº¦éƒ¨ç½²åŠŸèƒ½
- âœ… å®ç°äº†å‰ç«¯ Agent åˆçº¦éƒ¨ç½²åŠŸèƒ½
  - ä½¿ç”¨ viem å’Œé’±åŒ…å®¢æˆ·ç«¯éƒ¨ç½²åˆçº¦
  - éƒ¨ç½²å‰éªŒè¯é…ç½®ï¼ˆX402PaymentHandler åœ°å€ã€Payment Token åœ°å€ï¼‰
  - éƒ¨ç½²æˆåŠŸåè‡ªåŠ¨åˆ›å»ºåç«¯è®°å½•
  - æ·»åŠ äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

#### 3.3 åˆçº¦äº¤äº’åŠŸèƒ½
- âœ… æ·»åŠ äº†ä½™é¢æŸ¥è¯¢åŠŸèƒ½
  - ä»é“¾ä¸Šå®æ—¶æŸ¥è¯¢ Agent åˆçº¦ä½™é¢
  - æ”¯æŒåˆ·æ–°ä½™é¢
- âœ… æ·»åŠ äº†å……å€¼åŠŸèƒ½
  - å®ç°äº† ERC20 ä»£å¸å……å€¼åˆ° Agent åˆçº¦
  - æ·»åŠ äº†ç”¨æˆ·è¾“å…¥éªŒè¯
  - äº¤æ˜“ç¡®è®¤åè‡ªåŠ¨åˆ·æ–°ä½™é¢

### 4. åç«¯æ•°æ®åº“åˆå§‹åŒ–

- âœ… åˆ›å»ºäº† `backend/init_db.py` - æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- âœ… åˆ›å»ºäº† `backend/DATABASE_SETUP.md` - æ•°æ®åº“è®¾ç½®æŒ‡å—
- âœ… æä¾›äº†ä¸¤ç§åˆå§‹åŒ–æ–¹æ³•ï¼š
  - ç®€å•æ–¹æ³•ï¼šä½¿ç”¨åˆå§‹åŒ–è„šæœ¬
  - ç”Ÿäº§æ–¹æ³•ï¼šä½¿ç”¨ Alembic è¿ç§»

### 5. æ–‡æ¡£å®Œå–„

- âœ… åˆ›å»ºäº† `docs/DEPLOYMENT_STEPS.md` - è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤æŒ‡å—
  - åŒ…å«å®Œæ•´çš„å‰ç½®è¦æ±‚
  - è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤
  - é…ç½®æ›´æ–°è¯´æ˜
  - æ•…éšœæ’æŸ¥æŒ‡å—

## ğŸ“‹ å¾…å®Œæˆçš„å·¥ä½œï¼ˆéœ€è¦ç”¨æˆ·æ“ä½œï¼‰

### 1. éƒ¨ç½²åˆçº¦åˆ° Monad æµ‹è¯•ç½‘

ç”±äºéœ€è¦ç”¨æˆ·çš„ç§é’¥å’Œæµ‹è¯•ä»£å¸ï¼Œæ— æ³•è‡ªåŠ¨æ‰§è¡Œã€‚ç”¨æˆ·éœ€è¦ï¼š

1. é…ç½® `contracts/.env` æ–‡ä»¶ï¼ˆè®¾ç½® `PRIVATE_KEY`ï¼‰
2. è·å– Monad æµ‹è¯•ç½‘æµ‹è¯•ä»£å¸
3. è¿è¡Œéƒ¨ç½²è„šæœ¬ï¼š
   ```bash
   cd contracts
   forge script scripts/Deploy.s.sol:DeployScript \
     --rpc-url monad_testnet \
     --broadcast \
     --verify \
     -vvvv
   ```
4. è®°å½•éƒ¨ç½²çš„åˆçº¦åœ°å€

### 2. æ›´æ–°é…ç½®æ–‡ä»¶

éƒ¨ç½²å®Œæˆåï¼Œéœ€è¦æ›´æ–°ï¼š

- `frontend/.env` - å¡«å…¥åˆçº¦åœ°å€
- `backend/.env` - å¡«å…¥åˆçº¦åœ°å€

### 3. åˆå§‹åŒ–æ•°æ®åº“

è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–ï¼š

```bash
cd backend
python init_db.py
```

æˆ–ä½¿ç”¨ Alembicï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰ï¼š

```bash
alembic revision --autogenerate -m "Initial migration"
alembic upgrade head
```

### 4. å¯åŠ¨æœåŠ¡

- å¯åŠ¨åç«¯ï¼š`cd backend && uvicorn src.main:app --reload`
- å¯åŠ¨å‰ç«¯ï¼š`cd frontend && pnpm dev`

### 5. ç«¯åˆ°ç«¯æµ‹è¯•

- æµ‹è¯•é’±åŒ…è¿æ¥
- æµ‹è¯• Agent åˆ›å»ºå’Œéƒ¨ç½²
- æµ‹è¯•ä½™é¢æŸ¥è¯¢å’Œå……å€¼
- æµ‹è¯•æœåŠ¡å¸‚åœºæµè§ˆ
- æµ‹è¯•æœåŠ¡è´­ä¹°æµç¨‹

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ–°å¢æ–‡ä»¶

```
contracts/
  â””â”€â”€ .env.example                    # åˆçº¦éƒ¨ç½²é…ç½®æ¨¡æ¿

backend/
  â”œâ”€â”€ .env.example                    # åç«¯é…ç½®æ¨¡æ¿
  â”œâ”€â”€ init_db.py                      # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
  â””â”€â”€ DATABASE_SETUP.md              # æ•°æ®åº“è®¾ç½®æŒ‡å—

frontend/
  â”œâ”€â”€ .env.example                    # å‰ç«¯é…ç½®æ¨¡æ¿
  â””â”€â”€ src/
      â””â”€â”€ contracts/
          â”œâ”€â”€ Agent.json              # Agent ABI
          â”œâ”€â”€ AgentFull.json          # Agent å®Œæ•´ä¿¡æ¯ï¼ˆå« bytecodeï¼‰
          â”œâ”€â”€ Service.json            # Service ABI
          â”œâ”€â”€ Market.json             # Market ABI
          â””â”€â”€ X402PaymentHandler.json # X402PaymentHandler ABI

docs/
  â””â”€â”€ DEPLOYMENT_STEPS.md            # éƒ¨ç½²æ­¥éª¤æŒ‡å—
```

### ä¿®æ”¹çš„æ–‡ä»¶

```
contracts/
  â””â”€â”€ scripts/
      â””â”€â”€ Deploy.s.sol               # å®Œå–„äº†éƒ¨ç½²è„šæœ¬

frontend/
  â””â”€â”€ src/
      â”œâ”€â”€ pages/
      â”‚   â””â”€â”€ AgentPage.tsx          # æ·»åŠ äº†éƒ¨ç½²å’Œäº¤äº’åŠŸèƒ½
      â””â”€â”€ config/
          â””â”€â”€ constants.ts           # å·²ä¿®å¤ï¼ˆä½¿ç”¨ import.meta.envï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶
   cp contracts/.env.example contracts/.env
   cp backend/.env.example backend/.env
   cp frontend/.env.example frontend/.env
   ```

2. **éƒ¨ç½²åˆçº¦**
   ```bash
   cd contracts
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ PRIVATE_KEY
   forge script scripts/Deploy.s.sol:DeployScript \
     --rpc-url monad_testnet \
     --broadcast \
     --verify
   ```

3. **æ›´æ–°é…ç½®**
   - å°†éƒ¨ç½²çš„åˆçº¦åœ°å€å¡«å…¥ `frontend/.env` å’Œ `backend/.env`

4. **åˆå§‹åŒ–æ•°æ®åº“**
   ```bash
   cd backend
   python init_db.py
   ```

5. **å¯åŠ¨æœåŠ¡**
   ```bash
   # ç»ˆç«¯ 1: å¯åŠ¨åç«¯
   cd backend && uvicorn src.main:app --reload
   
   # ç»ˆç«¯ 2: å¯åŠ¨å‰ç«¯
   cd frontend && pnpm dev
   ```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç§é’¥å®‰å…¨**: æ°¸è¿œä¸è¦æäº¤åŒ…å«çœŸå®ç§é’¥çš„ `.env` æ–‡ä»¶
2. **æµ‹è¯•ä»£å¸**: ç¡®ä¿éƒ¨ç½²è´¦æˆ·æœ‰è¶³å¤Ÿçš„ MON æµ‹è¯•ä»£å¸
3. **ç½‘ç»œé…ç½®**: ç¡®ä¿é’±åŒ…è¿æ¥åˆ° Monad Testnet (Chain ID: 10143)
4. **åˆçº¦éªŒè¯**: éƒ¨ç½²åå»ºè®®åœ¨ Monad Explorer ä¸ŠéªŒè¯åˆçº¦

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [éƒ¨ç½²æ­¥éª¤æŒ‡å—](./docs/DEPLOYMENT_STEPS.md)
- [æ•°æ®åº“è®¾ç½®æŒ‡å—](./backend/DATABASE_SETUP.md)
- [Monad æµ‹è¯•ç½‘é…ç½®](./docs/MONAD_SETUP.md)
- [x402 åè®®é›†æˆæ–¹æ¡ˆ](./docs/X402_INTEGRATION_PLAN.md)

---

**æœ€åæ›´æ–°**: 2025å¹´
**çŠ¶æ€**: âœ… æ‰€æœ‰ä»£ç å’Œé…ç½®å·²å‡†å¤‡å°±ç»ªï¼Œç­‰å¾…ç”¨æˆ·éƒ¨ç½²åˆçº¦
